CREATE USER usuario WITH PASSWORD 'postdba';
CREATE DATABASE trabalho encoding "utf-8";
grant all privileges on database trabalho to usuario;
psql -h localhost -U usuario -d trabalho

create sequence sid_paciente;
create sequence sid_medico;
create sequence sid_atende;
create sequence sid_cirurgia;

CREATE TABLE paciente (
	id_paciente integer,
	codigo varchar(11),
	nome varchar(50),
	idade integer,
	CONSTRAINT pk_paciente PRIMARY KEY (id_paciente)
);

CREATE TABLE medico (
	id_medico integer,
	crm varchar(25),
	nome varchar(50),
	especialidade varchar(30),
	CONSTRAINT pk_medico PRIMARY KEY (id_medico)
);

CREATE TABLE atende (
	id_atende integer,
	id_paciente integer,
	id_medico integer,
	data Date,
	CONSTRAINT pk_atende PRIMARY KEY (id_atende),
	CONSTRAINT fk_paciente_atende FOREIGN KEY (id_paciente) REFERENCES paciente,
	CONSTRAINT fk_medico_atende FOREIGN KEY (id_medico) REFERENCES medico
);

CREATE TABLE cirurgia (
	id_cirurgia integer,
	codigo varchar(11),
	data date,
	descricao text,
	id_paciente integer,
	CONSTRAINT pk_cirurgia PRIMARY KEY (id_cirurgia),
	CONSTRAINT fk_paciente_cirurgia FOREIGN KEY (id_paciente) REFERENCES paciente
);
